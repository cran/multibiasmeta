<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Metabias packages tutorial</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Metabias packages tutorial</h1>


<div id="TOC">
<ul>
<li><a href="#publication-bias">Publication bias</a>
<ul>
<li><a href="#correcting-for-publication-bias">Correcting for publication bias</a></li>
<li><a href="#worst-case-meta-analysis">Worst-case meta-analysis</a></li>
<li><a href="#publication-bias-required-to-explain-away-the-results">Publication bias required to explain away the results</a></li>
<li><a href="#significance-funnel-plot">Significance funnel plot</a></li>
</ul></li>
<li><a href="#p-hacking"><em>p</em>-hacking</a>
<ul>
<li><a href="#correction-for-p-hacking">Correction for <em>p</em>-hacking</a></li>
<li><a href="#diagnostic-plots">Diagnostic plots</a></li>
</ul></li>
<li><a href="#multiple-biases">Multiple biases</a>
<ul>
<li><a href="#correction-for-internal-bias-andor-publication-bias">Correction for internal bias and/or publication bias</a></li>
<li><a href="#bias-required-to-explain-away-the-results">Bias required to explain away the results</a></li>
</ul></li>
</ul>
</div>

<p>This is a tutorial on how to use the packages <code>PublicationBias</code>, <code>phacking</code>, and <code>multibiasmeta</code>. Each package provides functions to conduct two types of sensitivity analysis:</p>
<ol style="list-style-type: decimal">
<li>A meta-analysis that is corrected for one or more within-study or across-study biases, for user-specified sensitivity parameters: <code>PublicationBias::pubbias_meta()</code>, <code>phacking::phacking_meta()</code>, <code>multibiasmeta::multibias_meta()</code></li>
<li>The minimum severity of the bias under consideration that would be required to &quot;explain away&quot; the results of the meta-analysis: <code>PublicationBias::svalue()</code>, <code>multibiasmeta::evalue()</code></li>
</ol>
<p>Each of these functions returns an object of class <code>metabias</code>, which consists of a list with four elements: <code>data</code>, <code>values</code>, <code>stats</code>, <code>fits</code>.</p>
<ul>
<li><code>data</code>: Dataframe containing data used to fit the model(s), with added columns for any values computed during model fitting.</li>
<li><code>values</code>: List of values of arguments passed to the function.</li>
<li><code>stats</code>: Dataframe of summary statistics from the model fit(s).</li>
<li><code>fits</code>: List of fitted objects (which have a class that depends on the underlying fitting methods, e.g. <code>robumeta::robu</code> or <code>rstan::stanfit</code>).</li>
</ul>
<p>This vignette goes through examples of how to use each of these functions.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">library</span>(PublicationBias)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="kw">library</span>(phacking)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="kw">library</span>(multibiasmeta)</span></code></pre></div>
<p>The example dataset <code>meta_meat</code> is from a meta-analysis that assessed the effectiveness of educational behavior interventions that attempt to reduce meat consumption by appealing to animal welfare (<a href="https://osf.io/bc2wy/">Mathur et al, 2021</a>). The meta-analysis included 100 studies (from 34 articles) that measured behavioral or self-reported outcomes related to meat consumption or purchasing. Point estimates (<code>yi</code>) are on the log relative risk (RR) scale. The variable <code>cluster</code> corresponds to the paper that contributed the point estimate, and <code>randomized</code> is a boolean indicating whether the study was randomized.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>meta_meat</span></code></pre></div>
<p>We will first conduct a standard meta-analysis point estimate from a fixed-effects meta-analysis, ignoring heterogeneity and clustering.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>metafor<span class="op">::</span><span class="kw">rma</span>(yi, vi, <span class="dt">data =</span> meta_meat, <span class="dt">method =</span> <span class="st">&quot;FE&quot;</span>)</span></code></pre></div>
<p>Now we will conduct a robust random-effects meta-analysis that accounts for heterogeneity and clustering, but still is not corrected for any potential biases.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>robumeta<span class="op">::</span><span class="kw">robu</span>(yi <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> meta_meat, <span class="dt">studynum =</span> cluster, <span class="dt">var.eff.size =</span> vi)</span></code></pre></div>
<div id="publication-bias" class="section level2">
<h2>Publication bias</h2>
<p>The <code>pubbias</code> functions conduct sensitivity analyses for publication bias in which affirmative studies (i.e., those with statistically significant estimates in the desired direction) are more likely to be published than nonaffirmative studies (i.e., those with nonsignificant estimates or estimates in the undesired direction) by a certain ratio, called selection_ratio (<a href="https://osf.io/s9dp6/">Mathur &amp; VanderWeele, 2020</a>). To provide intuition, suppose we knew that affirmative studies were twice as likely to be published as nonaffirmative studies. We could then correct the meta-analytic estimate by having each <em>published</em> nonaffirmative study contribute twice as much weight to the analysis as each affirmative study, which would counteract the publication process&#39; two-fold favoring of affirmative studies. This idea is similar to familiar procedures used to correct survey samples for nonrepresentative sampling.</p>
<p>However, in practice, we do not know exactly how severe publication bias is. In this case, we can instead conduct sensitivity analyses that describe the severity of publication bias (i.e., the selection_ratio) that would be required to explain away the results of the meta-analysis (e.g., to shift the point estimate to the null).</p>
<div id="correcting-for-publication-bias" class="section level3">
<h3>Correcting for publication bias</h3>
<p>For a chosen ratio of publication probabilities, <code>selection_ratio</code>, we can estimate a publication bias-corrected pooled point estimate and confidence interval per <a href="https://osf.io/s9dp6/">Mathur &amp; VanderWeele (2020)</a>. Model options include fixed-effects (a.k.a. &quot;common-effect&quot;), robust independent, and robust clustered specifications.</p>
<p>Since a selection ratio of 1 corresponds to no publication bias (i.e., affirmative and nonaffirmative studies are equally likely to be published), passing <code>selection_ratio = 1</code> recovers the uncorrected, fixed-effects point estimate that we obtained above.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>pubbias_meat_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">pubbias_meta</span>(meta_meat<span class="op">$</span>yi,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>                               meta_meat<span class="op">$</span>vi,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>                               <span class="dt">model_type =</span> <span class="st">&quot;fixed&quot;</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a>                               <span class="dt">selection_ratio =</span> <span class="dv">1</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>pubbias_meat_<span class="dv">1</span><span class="op">$</span>stats</span></code></pre></div>
<p>To consider publication bias, we can choose a value of <code>selection_ratio</code> that is greater than 1. For example, we will consider publication bias such that affirmative results are 4 times more likely to be published than nonaffirmative results.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>pubbias_meat_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">pubbias_meta</span>(meta_meat<span class="op">$</span>yi,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>                               meta_meat<span class="op">$</span>vi,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>                               <span class="dt">model_type =</span> <span class="st">&quot;fixed&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>                               <span class="dt">selection_ratio =</span> sr)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a>pubbias_meat_<span class="dv">4</span><span class="op">$</span>stats</span></code></pre></div>
<p>This fixed-effects meta-analysis indicates that if affirmative (i.e., significant and positive) studies were 4 times more likely to be published than nonaffirmative (i.e., nonsignificant or negative) studies, the meta-analytic point estimate corrected for publication bias would be NA (95% CI [NA, NA]).</p>
<p>Now we will use the same selection ratio, but will use the robust random-effects specification to account for heterogeneity and for clustering of point estimates within papers (which is the default behavior of <code>pubbias_meta()</code>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>pubbias_meat_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">pubbias_meta</span>(meta_meat<span class="op">$</span>yi,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a>                               meta_meat<span class="op">$</span>vi,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a>                               <span class="dt">cluster =</span> meta_meat<span class="op">$</span>cluster,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>                               <span class="dt">selection_ratio =</span> <span class="dv">4</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>pubbias_meat_<span class="dv">4</span><span class="op">$</span>stats</span></code></pre></div>
<p>This random-effects meta-analysis indicates that, if affirmative (i.e., significant and positive) studies were 4 times more likely to be published than nonaffirmative (i.e., nonsignificant or negative) studies, the meta-analytic point estimate corrected for publication bias would be NA (95% CI [NA, NA]).</p>
<p><code>pubbias_meta</code> has a number of arguments that can be used to change the model of publication bias. By default, <code>pubbias_meta</code> assumes that publication bias favors positive-signed, significant results, but in some contexts publication bias might instead favor negative-signed, significant results (e.g., if investigators wish to show that a treatment has a protective effect on a detrimental outcome). In such cases, you should pass <code>favor_positive = FALSE</code>.</p>
<p>Also, the function by default assumes that publication bias considered a one-tailed model of publication bias in which significant results with positive point estimates are favored, while significant results with negative point estimates and nonsignificant results are equally disfavored. In some contexts, it is possible instead that significant results are favored regardless of direction, while only nonsignificant results are disfavored (called &quot;two-tailed&quot; selection). We recommend by default conducting sensitivity analyses that assume one-tailed selection because this is more statistically conservative, but you can also assess two-tailed selection using the argument <code>selection_tails</code>.</p>
<p>Finally, the function by default assumes that results are treated as significant at α = 0.05. To change this threshold at which publication bias is assumed to operate, you can use the argument <code>alpha_select</code>.</p>
</div>
<div id="worst-case-meta-analysis" class="section level3">
<h3>Worst-case meta-analysis</h3>
<p>As a limiting case, we can conduct a meta-analysis of nonaffirmative results (MAN) that accounts for worst-case publication bias. That is, if affirmative studies were infinitely more likely to be published than nonaffirmative studies, we could obtain a corrected estimate by having nonaffirmative studies contribute infinitely more weight to the analysis than affirmative studies. This in fact corresponds to retaining only the nonaffirmative studies in analysis. Unlike standard publication bias methods, MAN can help assess robustness to other forms of selective reporting besides publication bias. In particular, MAN accommodates situations in which investigators manipulate or selectively report results <em>within</em> studies, called &quot;<em>p</em>-hacking&quot; (<a href="https://osf.io/ezjsx/">Mathur, 2022</a>).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>pubbias_meat_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">pubbias_meta</span>(meta_meat<span class="op">$</span>yi,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>                               meta_meat<span class="op">$</span>vi,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>                               <span class="dt">cluster =</span> meta_meat<span class="op">$</span>cluster,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a>                               <span class="dt">selection_ratio =</span> <span class="dv">4</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a>                               <span class="dt">return_worst_meta =</span> <span class="ot">TRUE</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a>pubbias_meat_<span class="dv">4</span><span class="op">$</span>stats</span></code></pre></div>
<p>If there were worst-case publication bias (i.e., that favors affirmative results infinitely more than nonaffirmative results), the corrected meta-analytic point estimate would be NA (95% CI [NA, NA]).</p>
</div>
<div id="publication-bias-required-to-explain-away-the-results" class="section level3">
<h3>Publication bias required to explain away the results</h3>
<p>We can also calculate the S-value, defined as the severity of publication bias (i.e., the ratio by which affirmative studies are more likely to be published than nonaffirmative studies) that would be required to shift the pooled point estimate or its confidence interval limit to the null, or to any other value <code>q</code> (which defaults to 0, the null).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a>svalue_meat_<span class="dv">0</span> &lt;-<span class="st"> </span><span class="kw">pubbias_svalue</span>(meta_meat<span class="op">$</span>yi,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a>                                meta_meat<span class="op">$</span>vi,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a>                                <span class="dt">cluster =</span> meta_meat<span class="op">$</span>cluster)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a>svalue_meat_<span class="dv">0</span><span class="op">$</span>stats</span></code></pre></div>
<p>These results indicate that, under this model of publication bias, there is no amount of publication bias that would shift the point estimate to 0. In fact, there is also no amount of publication bias that would shift the CI bound to 0.</p>
<p>Now we will consider the severity of publication bias required to shift the point estimate or its CI bound to <code>q = 0.1</code> rather than to the null.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>svalue_meat_<span class="dv">01</span> &lt;-<span class="st"> </span><span class="kw">pubbias_svalue</span>(meta_meat<span class="op">$</span>yi,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>                                 meta_meat<span class="op">$</span>vi,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a>                                 <span class="dt">cluster =</span> meta_meat<span class="op">$</span>cluster,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a>                                 <span class="dt">q =</span> <span class="fl">0.1</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>svalue_meat_<span class="dv">01</span><span class="op">$</span>stats</span></code></pre></div>
<p>These results indicate that, for the point estimate corrected for publication bias to shift to 0.10, affirmative studies would need to be times more likely to be published than nonaffirmative studies. Additionally, for the CI bound corrected for publication bias to shift to 0.10, affirmative studies would need to be NA times more likely to be published than nonaffirmative studies.</p>
<p>In general, if the S-value is small enough that it represents a plausible amount of publication bias (see the empirical benchmarks provided in (<a href="https://osf.io/p3xyd/">Mathur &amp; VanderWeele, 2019</a>), then the meta-analysis may be considered relatively sensitive to publication bias. In contrast, if the S-value represents an implausibly large amount of publication bias, then one might consider the meta-analysis to be relatively robust. These methods can sometimes indicate that no amount of publication bias under the assumed model could &quot;explain away&quot; the results of a meta-analysis, providing a compelling argument for robustness.</p>
</div>
<div id="significance-funnel-plot" class="section level3">
<h3>Significance funnel plot</h3>
<p>As a visual supplement to the proposed sensitivity analyses, we suggest presenting a modified funnel plot called the &quot;significance funnel plot&quot;. This plot distinguishes between affirmative and nonaffirmative studies, helping to detect the extent to which the nonaffirmative studies&#39; point estimates are systematically smaller than the entire set of point estimates. The estimate among only nonaffirmative studies (gray diamond) represents a corrected estimate under worst-case publication bias. If the gray diamond represents a negligible effect size or if it is much smaller than the pooled estimate among all studies (black diamond), this suggests that the meta-analysis may not be robust to extreme publication bias. Numerical sensitivity analyses (via <code>pubbias_svalue()</code> or <code>pubbias_meta()</code>) should still be carried out for more precise quantitative conclusions.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="kw">significance_funnel</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi, <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi)</span></code></pre></div>
</div>
</div>
<div id="p-hacking" class="section level2">
<h2><em>p</em>-hacking</h2>
<p>Publication bias, as assessed by standard methods, corresponds to a selection process that filters which studies are published and available for inclusion in meta-analysis. However, there can also be selective reporting <em>within</em> studies. For example, investigators may &quot;<em>p</em>-hack&quot; by analyzing multiple outcomes and reporting only affirmative results among these analyses, or by fitting multiple models to the same dataset in an attempt to obtain an affirmative estimate. Standard methods for publication bias can be biased in either direction when there is <em>p</em>-hacking (<a href="https://osf.io/ezjsx/">Mathur, 2022</a>). However, meta-analysis of nonaffirmative results (MAN, described above) MAN still provides a conservative estimate (i.e., biased toward the null) if there is <em>p</em>-hacking that favors affirmative results (<a href="https://osf.io/ezjsx/">Mathur, 2022</a>).</p>
<p>Additional sensitivity analyses for joint publication bias and <em>p</em>-hacking can be conducted. Assuming that published, hacked studies never have nonaffirmative estimates (e.g., their investigators <em>p</em>-hack until they obtain an affirmative estimate), we propose estimating the underlying meta-analytic mean by fitting &quot;right-truncated meta-analysis&quot; (RTMA) to the published nonaffirmative estimates, which are unhacked.</p>
<p>Unlike the other packages, the <code>phacking</code> package uses <a href="https://mc-stan.org/">Stan</a> to fit models and as such requires Stan and <a href="http://mc-stan.org/rstan/index.html">RStan</a> to be installed.</p>
<div id="correction-for-p-hacking" class="section level3">
<h3>Correction for <em>p</em>-hacking</h3>
<p>The function <code>phacking_meta()</code> fits right-truncated meta-analysis (RTMA), a bias correction for the joint effects of <em>p</em>-hacking (i.e., manipulation of results within studies to obtain significant, positive estimates) and traditional publication bias (i.e., the selective publication of studies with significant, positive results) in meta-analyses.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>phacking_meat &lt;-<span class="st"> </span><span class="kw">phacking_meta</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi, <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi, <span class="dt">parallelize =</span> <span class="ot">FALSE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>phacking_meat<span class="op">$</span>stats</span></code></pre></div>
<p>In these results, <code>mode</code>, <code>median</code>, and <code>mean</code> represent posterior modes, medians, and means respectively. We recommend reporting the mode (<a href="https://osf.io/ezjsx/">Mathur, 2022</a>). These results indicate that, accounting for potential <em>p</em>-hacking and publication bias that favor affirmative results, the estimated meta-analytic mean, <code>mu</code>, is NA and the estimated standard deviation of the effects (i.e., heterogeneity), <code>tau</code>, is NA.</p>
</div>
<div id="diagnostic-plots" class="section level3">
<h3>Diagnostic plots</h3>
<p>To assess the fit of right-truncated meta-analysis and possible violations of its distributional assumptions, we can plot the fitted cumulative distribution function (CDF) of the published nonaffirmative estimates versus their empirical CDF. If the points do not adhere fairly closely to a 45-degree line, the right-truncated meta-analysis may not fit adequately. Here, the fit is a bit questionable because the points toward the right-hand side of the plot do not adhere very closely to the line.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="kw">rtma_qqplot</span>(phacking_meat)</span></code></pre></div>
<p>As another diagnostic plot, we can examine the Z-scores of all published point estimates. When <em>p</em>-hacking favors affirmative estimates over nonaffirmative estimates, as our methods and others assume, Z-scores may disproportionately concentrate just above the critical value (e.g., 1.96). Importantly, the presence of <em>p</em>-hacking does not <em>guarantee</em> a concentration of Z-scores just above the critical value, so it is prudent to proceed with the fitting RTMA even if no such concentration is apparent. In contrast, if Z-scores also concentrate just <em>below</em> the critical value, or if they also concentrate below the sign-reversed critical value (e.g., –1.96), this could indicate forms of <em>p</em>-hacking that violate the assumptions of RTMA. This plot does not suggest a concentration of Z-scores just below 1.96.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="kw">z_density</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi, <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi)</span></code></pre></div>
</div>
</div>
<div id="multiple-biases" class="section level2">
<h2>Multiple biases</h2>
<p>In addition to publication bias and/or <em>p</em>-hacking, meta-analyses can be compromised by internal biases (e.g., confounding in nonrandomized studies) as well as publication bias. These biases often operate nonadditively: publication bias that favors significant, positive results selects indirectly for studies with more internal bias. These sensitivity analyses address two questions: (1) &quot;For a given severity of internal bias across studies and of publication bias, how much could the results change?&quot;; and (2) &quot;For a given severity of publication bias, how severe would internal bias have to be, hypothetically, to attenuate the results to the null or by a given amount?&quot; These methods consider the average internal bias across studies, obviating specifying the bias in each study individually. The analyst can assume that internal bias affects all studies, or alternatively a known subset (e.g., nonrandomized studies). The internal bias can be of unknown origin or, for certain types of bias in causal estimates, can be bounded analytically. The analyst can specify the severity of publication bias or, alternatively, consider &quot;worst-case&quot; publication bias as described above.</p>
<p>These sensitivity analyses involve specifying the selection ratio for publication bias, the mean additive internal bias among published, internally biased studies that are affirmative (<code>bias_affirmative</code>) and that are nonaffirmative (<code>bias_nonaffirmative</code>). respectively. Further guidance on choosing these sensitivity parameters is given in <a href="https://osf.io/u7vcb/">Mathur (2022)</a>.</p>
<div id="correction-for-internal-bias-andor-publication-bias" class="section level3">
<h3>Correction for internal bias and/or publication bias</h3>
<p>If we assume that no studies are internally biased (<code>bias_affirmative = 0</code>, <code>bias_nonaffirmative = 0</code>) but that there is publication bias (e.g., <code>selection ratio = 4</code>), then the results will match those of <code>pubbias_meta</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>multi_meat_<span class="dv">0</span> &lt;-<span class="st"> </span><span class="kw">multibias_meta</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a>                               <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>                               <span class="dt">selection_ratio =</span> <span class="dv">4</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a>                               <span class="dt">bias_affirmative =</span> <span class="dv">0</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a>                               <span class="dt">bias_nonaffirmative =</span> <span class="dv">0</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a>multi_meat_<span class="dv">0</span><span class="op">$</span>stats</span></code></pre></div>
<p>These results indicate that if affirmative studies were 4 times more likely to be published than nonaffirmative studies and studies did not have internal bias, the corrected meta-analytic point estimate would be NA (95% CI [NA, NA]).</p>
<p>Following <a href="https://osf.io/u7vcb/">Mathur (2022)</a>, we now consider publication bias in which affirmative studies are 4 times more likely to be published, and also in which the nonrandomized studies are, on average, biased due to confounding. For more details on specifying the values of the latter sensitivity parameters, see <a href="https://osf.io/u7vcb/">Mathur (2022)</a>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a>multi_meat_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">multibias_meta</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a>                               <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a>                               <span class="dt">biased =</span> <span class="op">!</span>meta_meat<span class="op">$</span>randomized,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true"></a>                               <span class="dt">selection_ratio =</span> <span class="dv">4</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true"></a>                               <span class="dt">bias_affirmative =</span> <span class="kw">log</span>(<span class="fl">1.5</span>),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true"></a>                               <span class="dt">bias_nonaffirmative =</span> <span class="kw">log</span>(<span class="fl">1.1</span>))</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true"></a>multi_meat_<span class="dv">1</span><span class="op">$</span>stats</span></code></pre></div>
<p>These results indicate that if (1) affirmative studies were 4 times more likely to be published than nonaffirmative studies; (2) affirmative, nonrandomized studies had a mean internal bias of <code>log(1.5)</code>; (3) nonaffirmative, nonrandomized studies had a mean internal bias of <code>log(1.1)</code>, and (4) randomized studies had no internal bias, the corrected meta-analytic point estimate would be NA (95% CI [NA, NA]).</p>
<p>We can repeat the sensitivity analysis, now treating all studies as internally biased (not just nonrandomized studies).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>multi_meat_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">multibias_meta</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a>                               <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a>                               <span class="dt">biased =</span> <span class="ot">TRUE</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a>                               <span class="dt">selection_ratio =</span> <span class="dv">4</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a>                               <span class="dt">bias_affirmative =</span> <span class="kw">log</span>(<span class="fl">1.5</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true"></a>                               <span class="dt">bias_nonaffirmative =</span> <span class="kw">log</span>(<span class="fl">1.1</span>))</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true"></a>multi_meat_<span class="dv">1</span><span class="op">$</span>stats</span></code></pre></div>
</div>
<div id="bias-required-to-explain-away-the-results" class="section level3">
<h3>Bias required to explain away the results</h3>
<p>We can also calculate, for a given severity of publication bias, how severe the average internal bias across studies would have to be, hypothetically, to attenuate the results to the null or by a given amount. For a selection ratio of 4 and assuming that only nonrandomized studies have internal bias:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>evalue_meat &lt;-<span class="st"> </span><span class="kw">multibias_evalue</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a>                                <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a>                                <span class="dt">biased =</span> <span class="op">!</span>meta_meat<span class="op">$</span>randomized,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true"></a>                                <span class="dt">selection_ratio =</span> <span class="dv">4</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true"></a>evalue_meat<span class="op">$</span>stats</span></code></pre></div>
<p>These results indicate that if affirmative studies are 4 more likely to get published than nonaffirmative studies, for the point estimate corrected for internal bias to shift to 0, non-randomized studies would need to have an average internal bias of NA. For the CI bound corrected for internal bias to shift to 0, non-randomized studies would need to have an average internal bias of NA.</p>
<p>Now we consider shifting the point estimate and CI bound to <em>q = 0.1</em> rather than to the null.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a>evalue_meat_<span class="dv">01</span> &lt;-<span class="st"> </span><span class="kw">multibias_evalue</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a>                                   <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a>                                   <span class="dt">biased =</span> <span class="op">!</span>meta_meat<span class="op">$</span>randomized,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a>                                   <span class="dt">selection_ratio =</span> <span class="dv">4</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a>                                   <span class="dt">q =</span> <span class="fl">0.1</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>evalue_meat_<span class="dv">01</span><span class="op">$</span>stats</span></code></pre></div>
<p>So far, we have worked with sensitivity parameters, <code>bias_affirmative</code> and <code>bias_nonaffirmative</code>, that simply summarize the additive internal bias across studies without making assumptions on its source. However, for certain types of bias in estimates of a causal parameter (e.g., a treatment effect), the bias can be reparameterized to more directly describe structural associations that involve latent variables, such as uncontrolled confounders, that are responsible for the bias. These reparameterizations apply if studies&#39; unadjusted estimates are on the log risk ratio scale or have been approximately transformed to this scale via the usual approaches in meta-analysis. Then, the sensitivity parameters regarding the bias on the risk ratio (<em>RR</em>) scale can be expressed in terms of structural associations involving latent variables. See <a href="https://osf.io/u7vcb/">Mathur (2022)</a> for more details.</p>
<p>For example, for uncontrolled confounding, the bias on the <em>RR</em> scale can be expressed in terms of the minimum strength of confounding associations that would need to be present on average across studies in order to produce the amount of bias indicated by <code>bias_est</code> and <code>bias_ci</code>. For a given study, the two relevant confounding associations are defined as: (1) the <em>RR</em> by which uncontrolled confounder(s) are associated with the exposure; and (2) the <em>RR</em> by which uncontrolled confounder(s) are associated with the outcome. Both confounding associations are conditional on any controlled covariates.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a>evalue_meat_conf &lt;-<span class="st"> </span><span class="kw">multibias_evalue</span>(<span class="dt">yi =</span> meta_meat<span class="op">$</span>yi,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a>                                     <span class="dt">vi =</span> meta_meat<span class="op">$</span>vi,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a>                                     <span class="dt">biased =</span> <span class="op">!</span>meta_meat<span class="op">$</span>randomized,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a>                                     <span class="dt">selection_ratio =</span> <span class="dv">4</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a>                                     <span class="dt">assumed_bias_type =</span> <span class="kw">list</span>(EValue<span class="op">::</span><span class="kw">confounding</span>()))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a>evalue_meat_conf<span class="op">$</span>stats</span></code></pre></div>
<p>These results indicate that if affirmative studies as 4 more likely to get published than nonaffirmative studies, for the point estimate corrected for internal bias to shift to 0, non-randomized studies would need to have confounding associations of . For the CI bound corrected for internal bias to shift to 0.10, non-randomized studies would need to have confounding associations of . For more on the interpretation of these parameters, see <a href="https://osf.io/u7vcb/">Mathur (2022)</a>.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
